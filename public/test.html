<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Test - Islamic Quiz App</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
        }
        .status { padding: 15px; margin: 15px 0; border-radius: 10px; }
        .success { background: rgba(76, 175, 80, 0.3); border: 2px solid #4caf50; }
        .warning { background: rgba(255, 152, 0, 0.3); border: 2px solid #ff9800; }
        .error { background: rgba(244, 67, 54, 0.3); border: 2px solid #f44336; }
        button {
            background: #4caf50;
            color: white;
            border: none;
            padding: 15px 30px;
            margin: 10px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
        }
        button:hover { background: #45a049; transform: translateY(-2px); }
        .debug-info { background: rgba(0, 0, 0, 0.2); padding: 20px; border-radius: 10px; margin: 20px 0; text-align: left; }
    </style>
</head>
<body>
    <div class="container">
        <h1>🕌 Islamic Quiz App - Deployment Test</h1>
        
        <div id="main-status" class="status">
            <h2>🔄 Testing deployment status...</h2>
        </div>
        
        <div class="debug-info">
            <h3>📊 System Information</h3>
            <p><strong>URL:</strong> <span id="current-url"></span></p>
            <p><strong>Time:</strong> <span id="current-time"></span></p>
            <p><strong>User Agent:</strong> <span id="user-agent"></span></p>
        </div>
        
        <div id="test-results"></div>
        
        <div>
            <button onclick="testMainApp()">🧪 Test React App</button>
            <button onclick="testFirebase()">🔥 Test Firebase</button>
            <button onclick="window.open('/debug.html', '_blank')">🔧 Advanced Debug</button>
            <button onclick="window.open('/', '_blank')">🏠 Open Main App</button>
        </div>
        
        <div class="debug-info">
            <h3>💡 Common Issues & Solutions</h3>
            <ul style="text-align: left;">
                <li><strong>Blank screen:</strong> Usually missing environment variables or JavaScript errors</li>
                <li><strong>Firebase errors:</strong> Check API keys and project configuration</li>
                <li><strong>Build failures:</strong> Check TypeScript errors and dependencies</li>
                <li><strong>Routing issues:</strong> Ensure SPA routing is configured in Vercel</li>
            </ul>
        </div>
    </div>

    <script>
        // Initialize page info
        document.getElementById('current-url').textContent = window.location.href;
        document.getElementById('current-time').textContent = new Date().toISOString();
        document.getElementById('user-agent').textContent = navigator.userAgent;
        
        function addResult(message, type = 'success') {
            const resultsDiv = document.getElementById('test-results');
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.innerHTML = message;
            resultsDiv.appendChild(div);
        }
        
        function updateMainStatus(message, type = 'success') {
            const statusDiv = document.getElementById('main-status');
            statusDiv.className = `status ${type}`;
            statusDiv.innerHTML = message;
        }
        
        async function testMainApp() {
            addResult('🔄 Testing React application...', 'warning');
            
            try {
                const response = await fetch('/');
                if (response.ok) {
                    const html = await response.text();
                    const hasRoot = html.includes('id="root"');
                    const hasMainScript = html.includes('/src/main.tsx') || html.includes('main');
                    
                    if (hasRoot && hasMainScript) {
                        addResult('✅ React app structure looks good - HTML contains root div and main script', 'success');
                        
                        // Try to detect if the root is actually populated
                        setTimeout(() => {
                            const testWindow = window.open('/', '_blank');
                            setTimeout(() => {
                                try {
                                    const rootContent = testWindow.document.getElementById('root');
                                    if (rootContent && rootContent.children.length > 0) {
                                        addResult('✅ React app is rendering content successfully!', 'success');
                                    } else {
                                        addResult('⚠️ React app root div is empty - check browser console for JavaScript errors', 'warning');
                                    }
                                    testWindow.close();
                                } catch (e) {
                                    addResult('ℹ️ Cannot test across domains - check the opened window manually', 'warning');
                                }
                            }, 2000);
                        }, 100);
                        
                    } else {
                        addResult('❌ React app structure issue - missing root div or main script', 'error');
                    }
                } else {
                    addResult(`❌ Main app request failed: HTTP ${response.status}`, 'error');
                }
            } catch (error) {
                addResult(`❌ Network error testing main app: ${error.message}`, 'error');
            }
        }
        
        async function testFirebase() {
            addResult('🔄 Testing Firebase configuration...', 'warning');
            
            // Test if we can fetch a Firebase resource
            try {
                // Try to make a request to Firebase (this will fail but give us info about the config)
                const testUrl = 'https://islamic-quiz-app-825c0-default-rtdb.firebaseio.com/.json';
                const response = await fetch(testUrl, { method: 'HEAD' });
                
                if (response.status === 401 || response.status === 403) {
                    addResult('✅ Firebase project exists and responds (auth required)', 'success');
                } else if (response.status === 404) {
                    addResult('⚠️ Firebase Realtime Database not found - but project exists', 'warning');
                } else {
                    addResult(`ℹ️ Firebase response: ${response.status}`, 'warning');
                }
            } catch (error) {
                if (error.message.includes('CORS')) {
                    addResult('✅ Firebase project exists (CORS block is normal)', 'success');
                } else {
                    addResult(`⚠️ Firebase test inconclusive: ${error.message}`, 'warning');
                }
            }
        }
        
        // Auto-run basic tests
        window.addEventListener('load', () => {
            updateMainStatus('✅ This test page loaded successfully! Deployment is working.', 'success');
            
            // Auto-test after a moment
            setTimeout(() => {
                addResult('🚀 Deployment is working - this page loaded successfully', 'success');
                addResult('📝 Now testing the main React application...', 'warning');
                testMainApp();
            }, 1000);
        });
        
        // Catch any errors on this page
        window.addEventListener('error', (event) => {
            addResult(`❌ JavaScript error: ${event.message}`, 'error');
        });
    </script>
</body>
</html>