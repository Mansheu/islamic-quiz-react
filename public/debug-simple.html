<!DOCTYPE html>
<html>
<head>
    <title>Debug - Islamic Quiz App</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 1000px; margin: 0 auto; background: #f5f5f5; }
        .section { background: white; padding: 20px; margin: 20px 0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .status { padding: 15px; margin: 10px 0; border-radius: 6px; border-left: 4px solid; }
        .success { background: #e8f5e8; color: #2e7d32; border-color: #4caf50; }
        .warning { background: #fff3e0; color: #f57c00; border-color: #ff9800; }
        .error { background: #ffebee; color: #c62828; border-color: #f44336; }
        .info { background: #e3f2fd; color: #1976d2; border-color: #2196f3; }
        button { background: #1976d2; color: white; border: none; padding: 12px 24px; margin: 8px; border-radius: 6px; cursor: pointer; }
        button:hover { background: #1565c0; }
        #logs { background: #2d2d2d; color: #f5f5f5; padding: 15px; border-radius: 6px; min-height: 100px; font-family: monospace; font-size: 12px; }
    </style>
</head>
<body>
    <div class="section">
        <h1>üîß Islamic Quiz App - Debug Tool</h1>
        <div class="status success">‚úÖ This debug page loaded - deployment is working!</div>
    </div>

    <div class="section">
        <h2>üß™ Tests</h2>
        <button onclick="testMainApp()">Test Main App</button>
        <button onclick="testFirebase()">Test Firebase</button>
        <button onclick="window.open('/', '_blank')">Open Main App</button>
        <button onclick="clearResults()">Clear</button>
        <div id="results"></div>
    </div>

    <div class="section">
        <h2>üìã Environment Variables</h2>
        <div class="status warning">
            ‚ö†Ô∏è Environment variables cannot be checked from this HTML page.<br>
            They are replaced at build time in the React app.<br>
            <strong>If Firebase fails, check your Vercel environment variables.</strong>
        </div>
    </div>

    <div class="section">
        <h2>üìä Console Output</h2>
        <div id="logs">Loading...</div>
        <button onclick="clearLogs()">Clear Logs</button>
    </div>

    <script>
        let logs = [];
        
        function log(message) {
            const time = new Date().toLocaleTimeString();
            logs.push(`[${time}] ${message}`);
            document.getElementById('logs').innerText = logs.join('\n');
        }
        
        function clearLogs() {
            logs = [];
            document.getElementById('logs').innerText = 'Logs cleared...';
        }
        
        function addResult(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.innerHTML = message;
            document.getElementById('results').appendChild(div);
        }
        
        function clearResults() {
            document.getElementById('results').innerHTML = '';
        }
        
        async function testMainApp() {
            addResult('üîÑ Testing main app...', 'info');
            
            try {
                const response = await fetch('/');
                if (response.ok) {
                    const html = await response.text();
                    const hasRoot = html.includes('id="root"');
                    
                    addResult(`‚úÖ App responds: ${response.status}`, 'success');
                    
                    if (hasRoot) {
                        addResult('‚úÖ Root element found', 'success');
                        addResult('‚ÑπÔ∏è HTML looks good. If blank, check browser console for JS errors.', 'info');
                    } else {
                        addResult('‚ùå No root element found', 'error');
                    }
                } else {
                    addResult(`‚ùå Bad response: ${response.status}`, 'error');
                }
            } catch (error) {
                addResult(`‚ùå Network error: ${error.message}`, 'error');
            }
        }
        
        function testFirebase() {
            addResult('üîÑ Testing Firebase...', 'info');
            addResult('‚úÖ Firebase project: islamic-quiz-app-825c0', 'success');
            addResult('‚ÑπÔ∏è If main app shows Firebase errors, check Vercel environment variables.', 'info');
        }
        
        // Initialize
        window.onload = function() {
            log('Debug page loaded');
            document.getElementById('logs').innerText = logs.join('\n') || 'Ready...';
            
            // Auto-test
            setTimeout(testMainApp, 1000);
        };
        
        // Capture errors
        window.onerror = function(msg, url, line) {
            log(`ERROR: ${msg} at ${url}:${line}`);
        };
        
        log('Debug initialized');
    </script>

    <div class="section">
        <h2>üí° Troubleshooting</h2>
        <div class="status info">
            <strong>If main app is blank:</strong><br>
            1. Open browser console (F12) and check for errors<br>
            2. Verify Firebase environment variables in Vercel dashboard<br>
            3. Make sure variables are set for "Production" environment<br>
            4. Redeploy after adding environment variables
        </div>
    </div>
</body>
</html>